<!DOCTYPE html>
<html> 
    <head>
        <title>Apply Now</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <script src="resumeParser.js"></script>
    </head>
    <body style="background: url(https://www.mindfiresolutions.com/wp-content/uploads/2021/04/background-5.jpg) center center fixed;
    background-size: cover;">
      <div style=" width: 100%;display: flex; justify-content: space-between; font-family: Nunito Sans, sans-serif; z-index: 3; height: 60px; background-color: #fff; box-shadow : 0 8px 20px 0 rgb(0 0 0 / 10%);">
        <div style="align-items: center;margin-left: 6%; display:flex">
          <img
            src="https://apply.mindfiresolutions.com/static/media/logo-white.913650c8.png"
            alt="logo"
            style= "width: 150px"
          />
        </div>
      <div><a  style="position:absolute; right:40px; top: 9px; color:#fff; background: #FF0000; padding: 8px 16px" href="https://apply.mindfiresolutions.com/">Current Opening</a></div>
      </div>  
      <div style="width: 900px;" class="container mt-2">
  
          <div id="holder" style="width: 100%; border: 2px dashed #ccc; height: 140px; margin-top: 2rem" class="d-flex  flex-column justify-content-center align-items-center ">
            <p id="dragText" class="text-muted"> Drop a file here(PDF only)</p>
            <button onclick="importData()" style="color: #fff; background: #FF0000; border: none; padding: 8px 16px">Browse Files</button> 
         </div>
         <div style="display: flex; justify-content:center">
          <i id="status"></i>
        </div>
          <legend class="text-danger mt-4">Personal Information</legend>
          <form>
              <div class="form-row mt-4">
                <div class="col">
                  <input type="text" class="form-control" placeholder="First name"/>
                </div>
                <div class="col">
                  <input type="text" id="email" class="form-control" placeholder="Email"/>
                </div>
              </div>
              <div class="form-row mt-2">
                  <div class="col">
                    <input type="text" id="dob" class="form-control" placeholder="Date Of Birth"/>
                  </div>
                  <div class="col">
                    <input type="text" class="form-control" placeholder="Skype Id"/>
                  </div>
                </div>
                <div class="form-row mt-2">
                  <div class="col">
                    <input type="text" id="phone" class="form-control" placeholder="Phone Number"/>
                  </div>
                  <div class="col">
                    <input type="text" id="altPhone" class="form-control" placeholder="Alternate Phone Number"/>
                  </div>
                </div>
                <div class="form-row mt-2">
                  <div class="col-6">
                    <input type="text" id="linkedln" class="form-control" placeholder="Linkedln Profile Link"/>
                  </div>
               </div>
               <legend class="text-danger mt-4">Location</legend>
               <div style="display: flex; justify-content: space-between;">
                  <div style="width: 50%; background-color: lightgray; padding-right: 1%;">
                      <select id="location" style="width: 100%; padding: 2%; background-color: lightgrey; border: none;"  class="form-select" aria-label="Default select example">
                          <option  style="background-color: white;" selected>Select Current Location</option>
                          <option style="background-color: white;"value="Bhubaneswar">Bhubaneswar</option>
                          <option style="background-color: white;"value="New Delhi">New Delhi</option>
                          <option style="background-color: white;"value="Bengaluru">Bengaluru</option>
                          <option style="background-color: white;"value="Kolkata">Kolkata</option>
                          <option style="background-color: white;"value="Hyderabad">Hyderabad</option>
                          <option style="background-color: white;"value="Mumbai">Mumbai</option>
                          <option style="background-color: white;"value="Pune">Pune</option>
  
                      </select>
                      <!-- <input  style="background-color: lightgray;" type="text" id="current_location" class="form-control" placeholder="Select Current Location"/> -->
                      
                  </div>
                  <div style="width: 50%; background-color: lightgray; margin-left: 2%; padding-right: 1%;">
                  <select style="width: 100%; padding: 2%; background-color: lightgray; border: none;" class="form-select" aria-label="Default select example">
                      <option style="background-color: white;" selected>Select Preferred Location</option>
                      <option style="background-color: white;" value="Bhubaneswar">Bhubaneswar</option>
                      <option style="background-color: white;" value="Delhi - NCR">Delhi - NCR</option>
                      <option style="background-color: white;" value="Remote Working">Remote Working</option>
                  </select>
                  </div>
              </div>
              <legend class="text-danger mt-4">Professional Details</legend>
              <span class="ml-2"><b>Work Experience</b></span>
              <div class="form-check-inline ml-2">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="optradio"><b>Fresher</b>
                </label>
              </div>
              <div class="form-check-inline">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="optradio"><b>Less Than One Year</b>
                </label>
              </div>
              <div class="form-check-inline disabled">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="optradio"><b>More Than One Year  </b>
                </label>
              </div>
              <div class="d-flex flex-row-reverse">
                <button  class="btn btn-danger">Submit</button>
              </div>
            </form>
            
  
        </div>  
        <script>
          $('#holder').on({
    'dragover dragenter': function (e) {
        e.preventDefault();
        e.stopPropagation();
    },
    'drop': function parsePdf(e) {
        var dataTransfer = e.originalEvent.dataTransfer;
        if (dataTransfer && dataTransfer.files.length) {
            e.preventDefault();
            e.stopPropagation();
            parse(dataTransfer.files);
        }

    }
});
            function importData() {
                let input = document.createElement('input');
                input.type = 'file';
                input.onchange = _ => {
                    // you can use this method to get file and perform respective operations
                    let files = Array.from(input.files);
                    parse(files);
                };
                input.click();

            }
            function setValue(element,value){
                if(element !== "location")
               { var el      = document.getElementById(element);
                el.value    = value;}    
            }

            function parse(files){
                //var files = document.getElementById("resumeupload").files;
                if (!files.length) {
                    return alert("Please choose a file to upload first.");
                }

                var file = files[0];
                var fileName = file.name;
                $("#dragText").text(fileName);
                var parser	= new resumeParser({
                                fileStream: file,
                                checkSpecialCharInFileName: false   // default
                            });
                
                parser.on('Error',function(e){
                    var errorMsg = e.detail.message;
                    alert(errorMsg);
                });
                
                parser.on('ScanProgress',function(e){
                  var statusEl = document.getElementById('status');
                    statusEl.innerHTML = 'Scanning document. Please wait...'; 
                });

                parser.on('ScanComplete',function(e){
                    var statusEl = document.getElementById('status');
                    statusEl.innerHTML = '';

                    var data = e.detail;
                    var email = data.email || '';
                    var contact = data.contact || '';
                    var linkedIn = data.linkedIn || '';

                    setValue('email',email);
                    setValue('phone',contact);
                    setValue('linkedln',linkedIn);
                });

                parser.on('FoundLocation',function(e){
                    var locationData = e.detail;
                    var city = locationData.city || '';
                    let locationPresent = false;
                    let cityArr = ["Bhubaneshwar","New Delhi","Bengaluru","Kolkata","Hyderabad","Mumbai","Pune",];
                    $("#location").empty();
                    for (let i = 0; i < cityArr.length; i++) {
                      if (cityArr[i].trim() === locationData.city.trim()) {
                        $("#location").append(
                          '<option style="background-color: white;" selected value=' +
                            cityArr[i] +
                            ">" +
                            cityArr[i] +
                            "</option>"
                        );
                        locationPresent = true;
                      } else {
                        $("#location").append(
                          '<option style="background-color: white;"  value=' +
                            cityArr[i] +
                            ">" +
                            cityArr[i] +
                            "</option>"
                        );
                      }
                    }

                    if (!locationPresent) {
                      document.getElementById("location").value =
                        locationData.city.trim();
                      $("#location").append(
                        '<option style="background-color: white;" selected value=' +
                          locationData.city +
                          ">" +
                          locationData.city +
                          "</option>"
                      );
                    }
                    setValue('location',city);
                })
                parser.init();
            }
        </script>
    </body>
</html>